# Tagging Dashboard

**Tagging Dashboard** is a web-based application built with **FastAPI (Python)** on the backend and **Vue 3 + TypeScript
** on the frontend. It is designed for **interactive tagging of simulation or measurement data**, including synchronized
video playback, live data streams, plugin-based visualizations, and real-time updates.

---

## Ô∏è Development Setup

### Backend (FastAPI)

Creation of a virtual environment and installation of dependencies:

```powershell
# Create a virtual environment
python -m venv venv

# On Windows (cmd.exe)
venv\Scripts\activate.bat
# On Windows (PowerShell)
venv\Scripts\Activate.ps1 
# On Linux/macOS (bash/zsh)
source venv/bin/activate

# Install dependencies
pip install -r requirements.txt
```

You need a ffmpeg installation to create the video previews. You can download it from the official website:
[FFmpeg](https://ffmpeg.org/download.html).
Make sure to add the ffmpeg binary to your PATH environment variable. You can check if ffmpeg is installed correctly by
running the following command in your terminal:

```powershell
ffmpeg -version
```

You should at least see version 7.0.1 or higher.
Ffmpeg is used to create the video previews and for other video file manipulations.

The backend can be started with:

```powershell
 python.exe -m uvicorn app.main:app --reload --port 8888 --log-level debug
```

API Docs available at: [http://localhost:8888/docs](http://localhost:8888/docs)

### Frontend (Vue 3 + TypeScript)

As the frontend is a Vue 3 application, you need to have Node.js and npm installed. You can download them from the
official
website: [Node.js](https://nodejs.org/).
After installing Node.js, you can check if it is installed correctly by running the following commands in your terminal:

```powershell
node -v
```

You should at least see version v21.6.1 or higher.

The frontend uses a generated OpenAPI client to communicate with the backend. The client is generated using the
[generateTypscriptRestClient.py](generateTypscriptRestClient.py) script. This script uses the OpenAPI specification
generated by FastAPI to create a TypeScript client that ist used in the frontend application.

From the project's root directory, generate the client with:

```powershell
python generateTypscriptRestClient.py
```

This will also generate an `openapi.json` file. This file contains the OpenAPI specification for the backend and can be
imported by many tools like Postman to test the API.

Switch to the frontend directory (`app.ui`) and install the dependencies:

```powershell
npm install
```

To fire up a development server, run:

```powershell
npm run dev
```

To build the frontend for production, run:

```powershell
# Build the frontend for production with type checking
npm run build

# Build the frontend for production without type checking
npm run build:fast
```

After building the frontend, you can find the production files in the `app\static` directory. This is the directory that
is served by the FastAPI backend.

There is also a PyInstaller spec to create a standalone executable for the application.
Make sure you have PyInstaller installed.

```powershell
pip install pyinstaller
```

Then run the following command to create the executable:

```powershell
pyinstaller --clean tagging_dashboard.spec
```

This will create a `dist` directory with the executable and all the necessary files to run the application. It is
recommended to run the
generated executable from a command line to see the output and error log messages.

## Usage

### Setup

There is a [settings.py](app/settings.py) file in the `app` directory. This file contains the configuration for the
application.
Change the path settings according to your needs:

- `TAG_PATH` : The output directory for the generated tagging files.
- `CSV_PATH` : The path to the CSV files that are output by the pantheras logger.
- `VIDEO_PATH`: The path to the video files that are output by the pantheras video steam.
- `SPRITE_FOLDER` : This is the folder where the backend stores the generated sprites that are used for displaying
  preview
  images of the video files.
- `CSV_UPLOAD_DIR` : This is the path where user uploaded CSV files are stored.
- `VIDEO_UPLOAD_DIR` : This is the path where user uploaded video files are stored.
